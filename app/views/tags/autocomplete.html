<input id="${_name}" name="${_name}" class="autocomplete-relation" data-url="${_url}" size="${_size}"/>
<script>$(function() {
$('input.autocomplete-relation').each( function() {
   var $input = $(this);
 
   // Create a hidden input with the same form control name to submit the value.
   var controlName = $input.attr('name');
   var $hidden = $('<input type="hidden"/>').attr('name', controlName);
   $input.after($hidden).attr('name', controlName + '_label');
 
   // Set-up the autocomplete widget.
   var serverUrl = $input.data('url');
   $(this).autocomplete({
      source: serverUrl,
      focus: function(event, ui) {
         // Set the text input value to the focused item's label, instead of the value.
         $input.val(ui.item.label);
         return false;
      },
      select: function(event, ui) {
         // Save the selection item and value in the two inputs.
         $input.val(ui.item.label);
         $hidden.val(ui.item.value);
         return false;
      }
   });
});
$('form').submit(function() {
   $(this).find('input.autocomplete-relation').attr('disabled', 'disabled');
});
});</script>